#!/usr/bin/env ruby
port = ARGV.first || 3000
rails_servers   = `ps aux | grep 'rails s' | awk '{ print $2 }'`.split
process_on_port = `lsof -P -i tcp:#{ port } | grep ruby | awk '{ print $2 }'`.split
system "echo #{ (rails_servers & process_on_port).join('') } | xargs kill > /dev/null"

